{% load static %}
{% load socialaccount %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/style1.css' %}">
    <title>Login Page</title>
</head>
<body>

    <!-- Main content area -->
    <main class="container-fluid vh-100 d-flex align-items-center">
        <section class="row w-100 shadow-lg mx-auto rounded-3 overflow-hidden vh-80">

            <!-- Kolom Gambar -->
            <div class="col-md-6 p-0 vh-100 d-flex flex-column justify-content-center align-items-center text-white d-none d-md-flex rounded-5" style="background: linear-gradient(180deg, #EE9AE5, #5961F9); position: relative;">
                <div class="text-center mb-5 p-4 d-flex align-items-center gap-2" style="position: relative;">
                    
                    <!-- Judul Questify dan Logo Perusahaan tetap berjejer -->
                    <h3 class="display-4 fw-bold mb-0" style="color: #010851; position: relative; margin-top: -300px; ">Questify</h3>
                    <img src="{% static 'images/arcticons--flixquest.png' %}" alt="Company Logo" style="width: 80px; height: 80px; opacity: 50%; position: relative; margin-top: -300px; margin-left: -20px;">
            
                </div>
                
                <!-- Teks tambahan di bawah tulisan dan logo Questify -->
                <p class="text-center" style="color: white; font-size: 1.5rem; font-weight: 500; margin-top: 80px; position: relative; margin-top: -140px;">Asah Kecepatan Berpikir</p>
                <p class="text-center" style="color: white; font-size: 1.5rem; font-weight: 500; position: relative;">Taklukan Setiap Misi</p>
                <!-- Tambahkan Gambar Hiasan -->
                <img src="{% static 'images/pngwing.com.png' %}" alt="hiasan" style="width: 300px; height: 300px; position: absolute; left: -120px; bottom: 40px; opacity: 50%; ">
                <img src="{% static 'images/pngwing.com.png' %}" alt="hiasan" style="width: 300px; height: 300px; position: absolute; left: -100px; bottom: 0px; opacity: 50%; ">
            </div>
                      
            
            <!-- Kolom Form Login -->
            <div class="col-md-6 bg-white p-5 d-flex flex-column justify-content-center vh-100">
                <h2 class="text-center mb-3 login-gradient-title fw-bold" style="color:#010851;">Login</h2>
                
                <form id="login-form" method="POST" action="">
                    {% csrf_token %}
                    
                    <!-- Input Username -->
                    <div class="input-group mb-3">
                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                        <input type="text" name="username" placeholder="Username" class="form-control input-style" required>
                    </div>
                    
                    <!-- Input Password -->
                    <div class="input-group mb-3">
                        <span class="input-group-text"><i class="fas fa-key"></i></span>
                        <input type="password" name="password" placeholder="Password" id="password" class="form-control input-style" required>
                        <button type="button" id="toggle-password" class="btn btn-outline-secondary">Show</button>
                    </div>
                    
                    <!-- Checkbox Keep Me Logged In -->
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" id="keepLoggedIn">
                        <label class="form-check-label" for="keepLoggedIn">Keep Me Logged In</label>
                    </div>
                    
                    <!-- Button Login -->
                    <div class="d-grid mb-3">
                        <button type="submit" class="btn btn-primary w-100" id="login-button" disabled>Login</button>
                    </div>
        
                    <div class="text-center mb-3">
                        <a href="{% provider_login_url 'google' %}" class="btn btn-outline-secondary d-flex align-items-center justify-content-center w-100">
                            <img src="{% static 'images/google.png' %}" alt="Google logo" style="width: 18px; margin-right: 10px;">
                            <span>Masuk dengan Google</span>
                        </a>                        
                    </div> 
        
                    <!-- Link Forgot Password -->
                    <div class="text-center mt-3">
                        <a href="#" class="text-decoration-none">Forgot password?</a>
                    </div>
                </form>
        
                <!-- Link Register -->
                <div class="text-center mt-4">
                    <p>Belum punya akun? <a href="{% url 'questify_app:register' %}" class="text-decoration-none">Register</a></p>
                </div>
            </div>
        </section>
        
    </main>
    

    <!-- Modal untuk Pesan Error -->
    <div class="modal fade" id="loginErrorModal" tabindex="-1" aria-labelledby="loginErrorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginErrorModalLabel">Login Error</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="error-message">
                    <!-- Pesan error akan muncul di sini -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Show/hide password functionality
            const togglePasswordButton = document.getElementById('toggle-password');
            const passwordField = document.getElementById('password');

            togglePasswordButton.addEventListener('click', function() {
                if (passwordField.type === 'password') {
                    passwordField.type = 'text';
                    togglePasswordButton.textContent = 'Hide';
                } else {
                    passwordField.type = 'password';
                    togglePasswordButton.textContent = 'Show';
                }
            });

            // Aktifkan tombol login jika checkbox Keep Me Logged In dicentang
            const keepLoggedInCheckbox = document.getElementById('keepLoggedIn');
            const loginButton = document.getElementById('login-button');

            keepLoggedInCheckbox.addEventListener('change', function() {
                loginButton.disabled = !keepLoggedInCheckbox.checked;
            });

            // Menampilkan pesan error dari Django jika ada
            {% if messages %}
                {% for message in messages %}
                    if ("{{ message.tags }}".includes('error')) {
                        document.getElementById('error-message').innerText = "{{ message }}";
                        var errorModal = new bootstrap.Modal(document.getElementById('loginErrorModal'), {});
                        errorModal.show();
                    }
                {% endfor %}
            {% endif %}
        });
    </script>
</body>
</html>
